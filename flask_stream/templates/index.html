<!DOCTYPE html>
<html>
<head>
    <title>ABS ì‹œìŠ¤í…œ</title>
</head>
<body>
    <h2>ì‹¤ì‹œê°„ í™ˆí”Œë ˆì´íŠ¸/íƒ€ì ê°ì§€</h2>
    <img src="{{ url_for('video_feed') }}" width="960" height="540">

     <!-- ğŸ¯ ì¶”ê°€ëœ ë¯¸ë‹ˆë§µ / íŒì •ìš© Canvas -->
    <canvas id="canvas" width="300" height="240" style="border:1px solid black; margin-top: 20px;"></canvas>

    <script>
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");
 
         function draw(data) {
             ctx.clearRect(0, 0, canvas.width, canvas.height);
 
             // ìŠ¤íŠ¸ì¡´ ë°•ìŠ¤ (ì‘ì€ ë¯¸ë‹ˆë§µìš©)
             ctx.strokeStyle = "white";
             ctx.lineWidth = 2;
             ctx.strokeRect(75, 45, 150, 150);  // x, y, width, height
 
             // ê³µ ìœ„ì¹˜
             if (data.ball) {
                 ctx.fillStyle = data.is_strike ? "green" : "red";
                 ctx.beginPath();
                 ctx.arc(data.ball.x, data.ball.y, 8, 0, Math.PI * 2);
                 ctx.fill();
             }
 
             // íŒì • ê²°ê³¼ í…ìŠ¤íŠ¸
             ctx.fillStyle = data.is_strike ? "green" : "red";
             ctx.font = "bold 20px Arial";
             ctx.fillText(data.is_strike ? "STRIKE" : "BALL", 10, 30);
         }
 
         // 0.3ì´ˆë§ˆë‹¤ ê°ì§€ ë°ì´í„° ë°›ì•„ì„œ ê·¸ë¦¼
         setInterval(() => {
             fetch("/data")
                 .then(res => res.json())
                 .then(draw)
                 .catch(console.error);
         }, 300);
    </script>
</body>
</html>
